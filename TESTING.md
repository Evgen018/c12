# Руководство по тестированию

## Чеклист тестирования функций AI-обработки

### Подготовка
- [ ] Убедиться, что переменная окружения `OPENROUTER_API_KEY` настроена в `.env.local` (локально) и в Vercel (production)
- [ ] Запустить приложение локально: `npm run dev`
- [ ] Убедиться, что все зависимости установлены: `npm install`

---

## 1. Тестирование кнопки "О чем статья?"

### Тест 1.1: Успешная обработка
**Шаги:**
1. Ввести URL англоязычной статьи (например: `https://techcrunch.com/2024/01/15/example-article`)
2. Нажать кнопку "О чем статья?"
3. Дождаться завершения обработки

**Ожидаемый результат:**
- Показывается индикатор загрузки "Идет генерация…"
- В поле результата появляется краткое описание статьи (2-3 абзаца)
- Описание на русском языке
- Описание содержит информацию о том, о чем статья и основные идеи

**Проверить:**
- [ ] Описание появилось
- [ ] Описание на русском языке
- [ ] Длина описания: 2-3 абзаца (примерно 150-250 слов)
- [ ] Описание информативное и релевантное

### Тест 1.2: Обработка длинной статьи
**Шаги:**
1. Ввести URL длинной статьи (>30000 символов)
2. Нажать кнопку "О чем статья?"

**Ожидаемый результат:**
- Статья обрезается до 30000 символов
- В логах появляется предупреждение об обрезке
- Описание все равно генерируется

**Проверить:**
- [ ] Обработка завершается успешно
- [ ] В логах есть предупреждение об обрезке

---

## 2. Тестирование кнопки "Тезисы"

### Тест 2.1: Успешная обработка
**Шаги:**
1. Ввести URL англоязычной статьи
2. Нажать кнопку "Тезисы"
3. Дождаться завершения обработки

**Ожидаемый результат:**
- В поле результата появляется нумерованный список тезисов
- Список на русском языке
- Количество тезисов: 5-10
- Каждый тезис: 1-2 предложения

**Проверить:**
- [ ] Список тезисов появился
- [ ] Тезисы на русском языке
- [ ] Формат: нумерованный список (1., 2., 3., ...)
- [ ] Количество тезисов: 5-10
- [ ] Каждый тезис информативный и релевантный

### Тест 2.2: Структура ответа
**Проверить:**
- [ ] Нет предисловий или комментариев перед списком
- [ ] Только нумерованный список тезисов
- [ ] Тезисы отражают ключевые идеи статьи

---

## 3. Тестирование кнопки "Пост для Telegram"

### Тест 3.1: Успешная обработка
**Шаги:**
1. Ввести URL англоязычной статьи
2. Нажать кнопку "Пост для Telegram"
3. Дождаться завершения обработки

**Ожидаемый результат:**
- В поле результата появляется готовый пост для Telegram
- Пост на русском языке
- Пост содержит эмодзи (3-5 штук)
- Длина поста: 200-400 слов
- Пост структурирован (заголовок, основной текст, вывод)

**Проверить:**
- [ ] Пост появился
- [ ] Пост на русском языке
- [ ] Используются эмодзи (3-5 штук, не перебор)
- [ ] Длина поста: 200-400 слов
- [ ] Пост интересный и информативный
- [ ] Пост готов к публикации без редактирования

### Тест 3.2: Форматирование поста
**Проверить:**
- [ ] Есть переносы строк для читаемости
- [ ] Нет хештегов и ссылок
- [ ] Стиль живой и интересный
- [ ] Пост привлекает внимание

---

## 4. Тестирование обработки ошибок

### Тест 4.1: Пустой URL
**Шаги:**
1. Оставить поле URL пустым
2. Нажать любую кнопку

**Ожидаемый результат:**
- Появляется сообщение: "Пожалуйста, введите URL статьи."

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] Кнопки не активны во время обработки

### Тест 4.2: Неверный URL
**Шаги:**
1. Ввести неверный URL (например: `https://invalid-url-12345.com`)
2. Нажать любую кнопку

**Ожидаемый результат:**
- Появляется сообщение об ошибке парсинга
- Сообщение информативное и понятное

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] Сообщение содержит детали ошибки

### Тест 4.3: Статья без контента
**Шаги:**
1. Ввести URL статьи, из которой не удается извлечь контент
2. Нажать любую кнопку

**Ожидаемый результат:**
- Появляется сообщение: "Не удалось извлечь контент статьи для обработки."

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] Сообщение информативное

### Тест 4.4: Ошибка API (нет ключа)
**Шаги:**
1. Временно удалить `OPENROUTER_API_KEY` из `.env.local`
2. Ввести URL статьи
3. Нажать любую кнопку AI-обработки

**Ожидаемый результат:**
- Появляется сообщение об ошибке конфигурации API ключа
- В логах есть детальная информация об ошибке

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] В логах есть информация об отсутствии ключа

### Тест 4.5: Ошибка сети
**Шаги:**
1. Отключить интернет
2. Ввести URL статьи
3. Нажать любую кнопку

**Ожидаемый результат:**
- Появляется сообщение об ошибке сети
- Сообщение содержит совет проверить подключение

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] Сообщение информативное

### Тест 4.6: Превышение лимита запросов (429)
**Шаги:**
1. Быстро отправить много запросов подряд
2. Наблюдать за обработкой ошибки

**Ожидаемый результат:**
- Появляется сообщение о превышении лимита
- Сообщение содержит совет подождать

**Проверить:**
- [ ] Сообщение об ошибке появилось
- [ ] Есть совет подождать и попробовать снова

---

## 5. Тестирование на Vercel (Production)

### Тест 5.1: Проверка переменных окружения
**Шаги:**
1. Открыть проект на Vercel
2. Перейти в Settings → Environment Variables
3. Проверить наличие `OPENROUTER_API_KEY`

**Проверить:**
- [ ] Переменная `OPENROUTER_API_KEY` настроена
- [ ] Переменная доступна для всех окружений (Production, Preview, Development)

### Тест 5.2: Тестирование на production URL
**Шаги:**
1. Открыть приложение на production URL (например: `https://c7-*.vercel.app`)
2. Протестировать все три кнопки с реальными статьями

**Проверить:**
- [ ] Все кнопки работают
- [ ] Результаты генерируются корректно
- [ ] Нет ошибок в консоли браузера
- [ ] Нет ошибок в логах Vercel

### Тест 5.3: Проверка логов
**Шаги:**
1. Открыть Vercel Dashboard
2. Перейти в Deployments → выбрать последний деплой
3. Открыть Functions → посмотреть логи

**Проверить:**
- [ ] Логи записываются корректно
- [ ] Нет критических ошибок
- [ ] Логи содержат полезную информацию для отладки

---

## 6. Тестирование производительности

### Тест 6.1: Время обработки
**Шаги:**
1. Ввести URL статьи
2. Нажать кнопку и засечь время до появления результата

**Проверить:**
- [ ] Время обработки разумное (< 30 секунд для обычной статьи)
- [ ] Показывается индикатор загрузки
- [ ] Пользователь понимает, что идет обработка

### Тест 6.2: Обработка больших статей
**Шаги:**
1. Ввести URL очень длинной статьи
2. Наблюдать за обработкой

**Проверить:**
- [ ] Обработка завершается успешно
- [ ] Контент обрезается корректно
- [ ] Результат все равно качественный

---

## 7. Тестирование пользовательского интерфейса

### Тест 7.1: Состояния кнопок
**Проверить:**
- [ ] Кнопки активны, когда URL введен
- [ ] Кнопки неактивны (disabled) во время обработки
- [ ] Активная кнопка визуально выделена
- [ ] Кнопки имеют правильные стили для темной/светлой темы

### Тест 7.2: Индикатор загрузки
**Проверить:**
- [ ] Индикатор "Идет генерация…" появляется во время обработки
- [ ] Индикатор анимирован
- [ ] Индикатор исчезает после завершения

### Тест 7.3: Поле результата
**Проверить:**
- [ ] Поле результата отображает текст корректно
- [ ] Длинные тексты прокручиваются
- [ ] Форматирование сохраняется (переносы строк, списки)
- [ ] Текст читаемый в темной и светлой теме

---

## Примеры тестовых статей

### Короткая статья
- URL: `https://www.bbc.com/news/technology/...`
- Ожидаемое время: 10-15 секунд

### Средняя статья
- URL: `https://techcrunch.com/2024/...`
- Ожидаемое время: 15-25 секунд

### Длинная статья
- URL: `https://www.theverge.com/...`
- Ожидаемое время: 20-30 секунд

---

## Критерии успешного тестирования

✅ Все кнопки работают корректно
✅ Результаты на русском языке
✅ Результаты соответствуют требованиям по формату и длине
✅ Ошибки обрабатываются корректно
✅ Сообщения об ошибках информативные
✅ Приложение работает на production
✅ Логи записываются корректно
✅ Пользовательский интерфейс отзывчивый и понятный

---

## Известные ограничения

- Максимальная длина контента: 30000 символов
- Время обработки зависит от длины статьи и скорости API
- Модель `mistralai/devstral-2512:free` имеет ограничения по количеству запросов

---

## Отчет о тестировании

После завершения тестирования заполните:

**Дата тестирования:** ___________

**Тестировщик:** ___________

**Результаты:**
- [ ] Все тесты пройдены
- [ ] Найдены проблемы (описать ниже)
- [ ] Требуется доработка

**Найденные проблемы:**
1. ___________
2. ___________
3. ___________

**Рекомендации:**
1. ___________
2. ___________
3. ___________

